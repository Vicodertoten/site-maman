---
import MainLayout from '../layouts/MainLayout.astro';
import Section from '../components/Section.astro';
import PageHero from '../components/PageHero.astro';
import { getLocationsData } from '../lib/sanity';

const locations = await getLocationsData();
const privateLocation = locations.find((location) => location?.type === 'prive') || null;

const serviceOffers = [
  {
    name: 'Location du lieu',
    price: 400,
    unitText: 'HTVA (21%)',
    audience: 'Cadre chaleureux “comme à la maison”'
  },
  {
    name: 'Restauration midi',
    price: 25,
    unitText: 'à partir de / pers.',
    audience: 'Cuisine de saison, lunch préparé sur place'
  },
  {
    name: 'Restauration soir',
    price: 50,
    unitText: 'à partir de / pers. (min. 8 pers.)',
    audience: 'Dîner convivial local et de saison'
  },
  {
    name: 'Ateliers cuisine (2h)',
    price: 65,
    unitText: 'à partir de / pers.',
    audience: 'Selon le menu choisi'
  }
];

const placeHighlights = [
  {
    title: 'Cadre inspirant',
    text: 'Nature, feu de bois, terrasse: un vrai cadre “comme à la maison”.'
  },
  {
    title: 'Confort et praticité',
    text: 'Cuisine équipée, parking facile, à 1 minute de la E411.'
  },
  {
    title: 'Prestations sur mesure',
    text: 'Lunch, dîner et options selon vos préférences.'
  },
  {
    title: 'Services supplémentaires',
    text: 'Ateliers, balade comestible et conférences alimentation santé.'
  }
];

const activityOffers = [
  {
    name: 'Conférence',
    duration: '2h',
    priceLabel: '250€'
  },
  {
    name: 'Balade comestible',
    duration: '1h',
    priceLabel: '125€'
  },
  {
    name: 'Atelier cuisine',
    duration: '2h',
    priceLabel: 'à partir de 65€/pers'
  }
];

const defaultFaqs = [
  {
    question: "Peut-on réserver le lieu sans activité ?",
    answer: "Oui. Vous pouvez privatiser le lieu avec la location de base, puis ajouter restauration et activités selon vos envies."
  },
  {
    question: "Quels services supplémentaires proposez-vous ?",
    answer: "Ateliers culinaires, balade comestible et conférences sur l'alimentation santé."
  },
  {
    question: "Quels sont les tarifs de référence ?",
    answer: "Location 400€ HTVA, midi à partir de 25€/pers, soir à partir de 50€/pers (min. 8 pers)."
  }
];

const faqs = (privateLocation?.faqs && privateLocation.faqs.length > 0)
  ? privateLocation.faqs.filter((item) => item?.question && item?.answer && item?.isVisible !== false)
  : defaultFaqs;

const pageDescription = 'Événements privés à Wavre: location du lieu, restauration de saison et activités sur mesure dans un cadre chaleureux.';
const serviceJsonLd = {
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Événements privés à Wavre",
  "serviceType": "Organisation d’événements privés et ateliers culinaires",
  "description": pageDescription,
  "provider": {
    "@type": "Organization",
    "name": "Gastronomade"
  },
  "areaServed": [
    { "@type": "City", "name": "Wavre" },
    { "@type": "City", "name": "Ottignies-Louvain-la-Neuve" },
    { "@type": "City", "name": "Rixensart" }
  ],
  "offers": serviceOffers.map((offer) => ({
    "@type": "Offer",
    "name": offer.name,
    "priceCurrency": "EUR",
    "price": offer.price,
    "url": "https://murielcruysmans.com/evenements-prives-wavre/",
    "description": `${offer.audience} • ${offer.unitText}`
  }))
};
const faqJsonLd = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map((item) => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer
    }
  }))
};
---

<MainLayout
  title="Événements privés à Wavre | Gastronomade"
  description={pageDescription}
  jsonLd={[serviceJsonLd, faqJsonLd]}
>
  <PageHero
    hero={privateLocation?.hero}
    updatedAtIso={privateLocation?._updatedAt}
    defaultVariant="simple"
    defaultKicker="Privés"
    defaultTitle="Événements privés à Wavre"
    defaultSubtitle="Un cadre chaleureux pour recevoir “comme à la maison”."
    defaultCtaCount={1}
    defaultPrimaryCtaLabel="Réserver un événement privé"
    defaultPrimaryCtaUrl="/contact?need=prive"
    sectionClass="bg-white"
  />

  <Section class="bg-white" containerClass="max-w-4xl">
    <div class="space-y-5" slot="content">
      <h2 class="mv-section-title">Tarifs et infos clés</h2>
      <p class="text-sm text-mv-forest-70">
        Activités disponibles en complément de votre événement:
      </p>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        {activityOffers.map((offer) => (
          <article class="mv-card p-5">
            <p class="text-xs uppercase tracking-[0.16em] text-mv-forest-60">{offer.name}</p>
            <p class="mt-2 text-sm text-mv-forest-70">Durée: {offer.duration}</p>
            <p class="mt-2 text-xl font-serif font-bold text-mv-forest">{offer.priceLabel}</p>
          </article>
        ))}
      </div>
      <div class="rounded-2xl border border-mv-leaf-20 bg-mv-cream p-5">
        <h3 class="text-lg font-semibold text-mv-forest">Pourquoi ce lieu ?</h3>
        <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3">
          {placeHighlights.map((item) => (
            <div class="rounded-xl border border-mv-leaf-20 bg-white p-3">
              <p class="text-sm font-semibold text-mv-forest">{item.title}</p>
              <p class="mt-1 text-xs sm:text-sm text-mv-forest-80">{item.text}</p>
            </div>
          ))}
        </div>
      </div>
      <div class="rounded-2xl border border-mv-leaf-20 bg-mv-cream p-5">
        <h3 class="text-lg font-semibold text-mv-forest">Passer à l’action</h3>
        <p class="mt-2 text-sm text-mv-forest-80">Un échange rapide permet de choisir la bonne combinaison: location, restauration et activités.</p>
        <div class="mt-4 flex flex-wrap gap-3">
          <a href="/contact?need=prive" class="mv-btn mv-btn-primary bg-mv-forest text-mv-cream">Demander une date</a>
          <a href="/auteur" class="mv-btn mv-btn-secondary border-mv-forest text-mv-forest hover:bg-mv-forest hover:text-mv-cream">Voir le parcours de Muriel</a>
        </div>
      </div>
    </div>
  </Section>

  <Section class="bg-mv-cream" containerClass="max-w-4xl">
    <div class="max-w-3xl" slot="content">
      <h2 class="mv-section-title">FAQ</h2>
    </div>
    <div class="mt-6 space-y-3" slot="content">
      {faqs.map((faq, index) => (
        <details class="mv-card p-4 sm:p-5">
          <summary class="cursor-pointer text-sm font-semibold text-mv-forest">{faq.question}</summary>
          <p class="mt-3 text-sm text-mv-forest-70">{faq.answer}</p>
        </details>
      ))}
    </div>
  </Section>
</MainLayout>
